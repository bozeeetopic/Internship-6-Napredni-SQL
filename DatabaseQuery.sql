USE master
DROP DATABASE LanguageSchoolDatabase
CREATE DATABASE LanguageSchoolDatabase
USE LanguageSchoolDatabase

CREATE TABLE Teachers(
	Id int IDENTITY(1,1) PRIMARY KEY,
	[Name] nvarchar(30) NOT NULL,
	Surname nvarchar(30) NOT NULL
)
CREATE TABLE Classrooms(
	Id int IDENTITY(1,1) PRIMARY KEY,
	RoomNumber int NOT NULL
)
CREATE TABLE Courses (
	Id int IDENTITY(1,1) PRIMARY KEY,
	[Language] nvarchar(30) NOT NULL UNIQUE,
	ClassroomId int FOREIGN KEY REFERENCES Classrooms(Id) NOT NULL
)
CREATE TABLE TeacherCourse (
	TeacherId int REFERENCES Teachers(Id) NOT NULL,
	CourseId int REFERENCES Courses(Id) NOT NULL,
	CONSTRAINT [Id] PRIMARY KEY (TeacherId, CourseId)
)
CREATE TABLE Lectures (
	Id int IDENTITY(1,1) PRIMARY KEY,
	[Date] datetime2 NOT NULL,
	DurationMinutes int NOT NULL,
	TeacherId int NOT NULL,
	CourseId int NOT NULL,
	CONSTRAINT [Id] FOREIGN KEY (TeacherId,CourseId) 
	REFERENCES TeacherCourse(TeacherId, CourseId)
)
CREATE TABLE Atendees (
	Id int IDENTITY(1,1) PRIMARY KEY,
	[Name] nvarchar(30) NOT NULL,
	Surname nvarchar(30) NOT NULL,
	Age int CHECK (Age > 0 AND Age < 100) NOT NULL
)
CREATE TABLE LectureAtendee (
	Id int IDENTITY(1,1) PRIMARY KEY,
	AtendeeId int FOREIGN KEY REFERENCES Atendees(Id) NOT NULL,
	LectureId int FOREIGN KEY REFERENCES Lectures(Id) NOT NULL
)


INSERT INTO Teachers([Name],Surname) VALUES
('Emmery','Crosse'),
('Dionisio','Reedman'),
('Skylar','Henningham'),
('Melisenda','Quadri'),
('Rose','Matton'),
('Essy','Bevens'),
('Roze','Guerri'),
('Hebert','Sans'),
('Jammal','Pendle'),
('Hanni','Vasechkin')
INSERT INTO Classrooms(RoomNumber) VALUES
('432'),
('161'),
('507'),
('566'),
('954'),
('537'),
('473'),
('929'),
('444'),
('898'),
('456'),
('112')
INSERT INTO Courses([Language],ClassroomId) VALUES
('Bulgarian',1),
('Chinese',1),
('Indonesian',2),
('Russian',3),
('Uzbekistanian',4),
('Polish',5),
('Colombian',6),
('Korean',7)
INSERT INTO Lectures([Date],DurationMinutes,TeacherCourseId) VALUES
('2021-06-19',86,8),
('2021-10-27',108,2),
('2021-09-14',94,3),
('2021-09-01',63,8),
('2021-03-24',97,5),
('2021-08-23',115,8),
('2021-02-23',70,1),
('2021-05-22',96,1),
('2021-11-16',115,2),
('2021-05-07',102,7),
('2021-07-06',85,3),
('2021-10-01',117,7),
('2020-12-16',103,6),
('2021-11-20',66,1),
('2021-08-06',118,6),
('2021-07-08',109,4),
('2021-10-15',115,7),
('2021-04-18',117,4),
('2021-05-09',108,6),
('2021-11-24',75,4),
('2021-10-31',77,7),
('2021-06-15',61,1),
('2021-02-05',69,4),
('2021-01-15',76,8),
('2021-09-04',100,3),
('2021-01-30',82,8),
('2021-03-05',87,6),
('2021-04-29',111,3),
('2021-12-07',120,1),
('2021-11-19',107,6)
INSERT INTO TeacherLecture(TeacherId,LectureId) VALUES
(9,4),
(8,11),
(8,6),
(7,29),
(1,14),
(7,9),
(7,19),
(9,18),
(4,12),
(5,6),
(8,15),
(6,14),
(6,8),
(10,16),
(1,26),
(10,23),
(2,24),
(7,10),
(3,4),
(7,11),
(4,2),
(2,2),
(2,28),
(2,17),
(10,5),
(7,22),
(8,4),
(10,16),
(3,8),
(6,6)
INSERT INTO Atendees([Name],Surname,Age) VALUES
('Bernadette','Gietz',14),
('Nicolette','Row',15),
('Malissia','Snoden',50),
('Barry','Trahearn',34),
('Sib','Durdan',23),
('Patric','Plain',56),
('Thia','Shayler',86),
('Gianina','Cropp',34),
('Sadye','Caddens',73),
('Bar','Shoebridge',24),
('Christie','Meconi',13),
('Roda','Piatkowski',67),
('Mackenzie','Whitehorn',42),
('Glyn','Van de Velde',75),
('Odo','Limb',12),
('Kora','Sanbroke',23),
('Heidie','Skillanders',34),
('Gib','Woollard',46),
('Bartram','Abel',75),
('Duke','Faughny',48),
('Tremain','Woakes',24),
('Heloise','Halhead',71),
('Marcy','Hartshorn',71),
('Tyrus','Wooles',39),
('Glenine','Butcher',93),
('Clare','Clerk',99),
('Wayland','Ertelt',23),
('Bridgette','Lemoir',42),
('Lanny','Ortes',23),
('Kristien','Bundey',52),
('Deane','Chisnell',25),
('Sidney','Cream',27),
('Morey','Giacobini',28),
('Kerstin','Wailes',33),
('Tyne','Cutriss',31),
('Feodor','Bowry',32),
('Kalina','Youthed',36),
('Yvette','Hackinge',37),
('Gwenni','Ferriere',23),
('Kenon','McAndrew',24),
('Dorise','Peake',24),
('Tris','Jendricke',25),
('Waldon','Bolton',21),
('Abra','Clandillon',19),
('Anita','McKane',18)
INSERT INTO LectureAtendee(AtendeeId,LectureId) VALUES
(1,20),
(25,15),
(19,1),
(26,9),
(12,11),
(26,3),
(24,17),
(6,22),
(37,25),
(8,24),
(35,24),
(23,19),
(15,12),
(42,29),
(26,25),
(20,13),
(30,3),
(17,14),
(12,10),
(33,5),
(5,6),
(26,10),
(39,12),
(16,27),
(20,8),
(34,14),
(2,21),
(26,11),
(41,4),
(28,12),
(35,25),
(10,3),
(32,25),
(12,16),
(34,10),
(12,3),
(38,1),
(29,14),
(1,21),
(43,10),
(25,13),
(6,16),
(23,4),
(33,25),
(44,20),
(38,11),
(26,16),
(11,7),
(36,16),
(30,7),
(6,26),
(27,9),
(30,2),
(5,11),
(40,5),
(34,18),
(27,2),
(12,14),
(41,19),
(38,28),
(6,24),
(44,7),
(14,3),
(3,5),
(18,5),
(22,25),
(22,7),
(6,12),
(35,7),
(33,14),
(19,2),
(36,29),
(22,19),
(1,1),
(24,28),
(23,9),
(7,2),
(7,21),
(2,15),
(16,12),
(20,25),
(10,5),
(28,22),
(37,2),
(19,6),
(7,10),
(8,3),
(34,29),
(1,15),
(38,14),
(10,17),
(32,29),
(1,2),
(35,23),
(36,12),
(19,19),
(30,18),
(33,4),
(34,13),
(8,11)


